<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <!-- Metadados Essenciais -->
    <meta charset="UTF-8" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="BoardToim - Um jogo de tabuleiro √©pico!"
    />
    <meta name="author" content="Antonio Mota" />

    <!-- Metadados para Compartilhamento -->
    <meta property="og:site_name" content="BoardToim | TONI" />
    <meta property="og:title" content="BoardToim - Batalhas Lend√°rias" />
    <meta
      property="og:description"
      content="Prepare-se para uma batalha √©pica com guerreiros, magos, morte e drag√µes."
    />
    <meta property="og:image" content="src/assets/images/cerveja.png" />
    <meta property="og:type" content="website" />

    <!-- Controle de Cache -->
    <meta
      http-equiv="cache-control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="pragma" content="no-cache" />

    <!-- T√≠tulo e √çcone da P√°gina -->
    <title>BoardToim</title>
    <link rel="icon" href="src/assets/cerveja.ico" type="image/x-icon" />

    <!-- CSS Externo -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="styles/style.css" />

    <!-- JavaScript Externo -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.5.0/dist/peerjs.min.js"></script>
  </head>

  <body>
    <!-- Loading da Taverna -->
    <div class="taverna-loading-overlay" id="tavernaLoading">
      <div class="taverna-loading-content">
        <img
          src="src/assets/images/cerveja.png"
          alt="cervejinha"
          class="taverna-cerveja"
        />
        <p class="taverna-loading-text" id="tavernaLoadingText">
          Aguarde, estamos enchendo as canecas...
        </p>
        <div class="taverna-progress-bar">
          <div class="taverna-progress-fill"></div>
        </div>
      </div>
    </div>

    <div id="loading-screen">
      <div class="rpg-container">
        <img
          src="src/assets/images/pergaminho.png"
          alt="Pergaminho"
          class="pergaminho-img"
        />
        <p class="loading-text">Preparando o campo de batalha...</p>

        <!-- Barra de progresso -->
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>

        <!-- Anima√ß√£o das pe√ßas abaixo da barra de loading -->
        <div class="characters-container">
          <img
            src="src/assets/images/w.png"
            alt="Bruxa"
            class="character-animation"
          />

          <img
            src="src/assets/images/c.png"
            alt="Guerreiro"
            class="character-animation"
          />
          <img
            src="src/assets/images/d.png"
            alt="Drag√£o"
            class="character-animation"
          />

          <img
            src="src/assets/images/m.png"
            alt="Mago"
            class="character-animation"
          />
          <img
            src="src/assets/images/f.png"
            alt="Morte"
            class="character-animation"
          />
        </div>
      </div>
    </div>

    <div class="container" id="container">
      <div class="input-container">
        <div class="oculto">
          <audio id="audioPlayer" controls>
            <source src="" type="audio/mp3">
            Seu navegador n√£o suporta o elemento de √°udio.
          </audio>
          <div class="input-group mt-4">
            <input
              type="text"
              id="game-id"
              class="form-control"
              value=""
              disabled
              aria-label="ID do Jogo"
            />
            <button
              class="btn btn-outline-secondary width-button"
              id="copyButton"
              data-bs-toggle="tooltip"
              title="Copiado!"
            >
              Copiar
            </button>
          </div>

          <div class="input-group margin-button">
            <input
              type="text"
              id="peer-id-input"
              class="form-control"
              placeholder="Insira o ID do Advers√°rio"
              aria-label="Nome do Jogador"
            />
            <button class="btn btn-primary width-button" onclick="clickGame()">
              Jogar
            </button>
          </div>
        </div>

        <!-- Bot√£o da Taverna -->
        <div class="container mt-4">
          <a href="#" class="btn btn-rpg width-button" id="userListButton">
            <img
              src="src/assets/images/cerveja.png"
              alt="Taverna"
              class="taverna-icon"
            />
            <span> Taverna Caldeir√£o Furado </span>
          </a>
        </div>
      </div>

      <div class="info-container">
        <h4 class="info-title">üè∞ Regras do Jogo</h4>
        <h5 class="info-subtitle">
          Cada jogador comanda um ex√©rcito de pe√ßas lend√°rias, cada uma com
          habilidades especiais e destemidas. Prepare-se para uma batalha √©pica:
        </h5>

        <!-- Lista de pe√ßas com descri√ß√µes limitadas -->
        <ul class="info-list">
          <li>
            <div class="info-img">
              <span class="pieces-index orange"></span>
            </div>
            <div class="info-text">
              <h6 class="piece-title">
                Guerreiro (O Aniquilador de Drag√µes) - 3 pe√ßas
              </h6>
              <div class="info-description">
                <div class="piece-description" id="description-guerreiros">
                  Esses her√≥is de m√∫sculos e espadas enfrentam drag√µes sem
                  piscar e n√£o hesitam em derrubar outros guerreiros em batalha.
                  Mas, se ousarem atacar uma Bruxa ou um Mago, suas armaduras se
                  desfazem, e eles viram poeira. E isso n√£o √© tudo ‚Äì ao atacar a
                  pr√≥pria Morte, ela os ceifa e leva suas almas consigo. Sua
                  defesa pode n√£o ser das melhores, mas ningu√©m pode negar a
                  coragem do estilo ‚Äúvou, mas caio lutando‚Äù, algo digno de
                  admira√ß√£o.
                </div>
                <button
                  class="button-text"
                  onclick="togglePiece('description-guerreiros', this)"
                >
                  Ler Mais
                </button>
              </div>
            </div>
          </li>

          <li>
            <div class="info-img">
              <span class="pieces-index green"></span>
            </div>
            <div class="info-text">
              <h6 class="piece-title">
                Bruxa (A Reveladora de Segredos) - 2 pe√ßas
              </h6>
              <div class="info-description">
                <div class="piece-description" id="description-bruxas">
                  As Bruxas s√£o o verdadeiro pesadelo para pe√ßas furtivas!
                  Quando atacam, s√≥ conseguem derrotar guerreiros. Mas isso √©
                  apenas o come√ßo: se duas Bruxas se enfrentam, o encontro se
                  transforma em um espet√°culo sobrenatural ‚Äì ambas desaparecem
                  numa explos√£o m√°gica digna de fogos de artif√≠cio. Al√©m disso,
                  todos os advers√°rios escondidos, como a Morte e o Drag√£o, s√£o
                  revelados, mostrando suas verdadeiras formas, o que pode ser
                  devastador! Apesar de poderosas, n√£o s√£o invenc√≠veis (quem √©,
                  afinal?), ent√£o, se um Mago, a Morte, um Drag√£o ou outra Bruxa
                  resolve atac√°-las, √© o fim da linha.
                </div>
                <button
                  class="button-text"
                  onclick="togglePiece('description-bruxas', this)"
                >
                  Ler Mais
                </button>
              </div>
            </div>
          </li>

          <li>
            <div class="info-img">
              <span class="pieces-index purple"></span>
            </div>
            <div class="info-text">
              <h6 class="piece-title">
                Mago (O Aut√™ntico Feiticeiro do Campo) - 2 pe√ßas
              </h6>
              <div class="info-description">
                <div class="piece-description" id="description-magos">
                  Magos s√£o os estrategistas do campo de batalha, mandando
                  Guerreiros e Bruxas pelos ares sem esfor√ßo. Mas, quando dois
                  Magos se enfrentam, a disputa vira um duelo √©pico onde o
                  primeiro a conjurar magia leva a vit√≥ria! S√≥ que h√° um
                  problema: se um Drag√£o entra na brincadeira, o Mago vira
                  churrasco rapidinho, eles s√£o imunes as suas magias (olha que
                  ousadia). E embora n√£o sejam exatamente fr√°geis, n√£o √© como se
                  eles fossem feitos de armadura de ferro! Qualquer outro Mago
                  ou um Drag√£o que decida encar√°-los de frente... bom, √© tchau
                  para nossos ilustres conjuradores.
                </div>
                <button
                  class="button-text"
                  onclick="togglePiece('description-magos', this)"
                >
                  Ler Mais
                </button>
              </div>
            </div>
          </li>

          <li>
            <div class="info-img">
              <span class="pieces-index red"></span>
            </div>
            <div class="info-text">
              <h6 class="piece-title">
                Morte (O Cortejo Silencioso) - 2 pe√ßas
              </h6>
              <div class="info-description">
                <div class="piece-description" id="description-morte">
                  Mortes n√£o brincam. Elas s√£o met√≥dicas e letais (como o nome
                  bem indica). Bruxas? Eliminadas. Guerreiros? Magos? Tamb√©m.
                  Mas, contra um Drag√£o... bom, √†s vezes at√© a Morte sabe que √©
                  melhor esperar. Ao ceifar qualquer pe√ßa que n√£o seja uma
                  Bruxa, elas se despedem do campo de batalha com suas almas
                  ceifadas. Por√©m, se uma Bruxa ousar atacar, a Morte apenas se
                  revela e permanece em batalha, lan√ßando um sorriso sinistro ‚Äì
                  como se dissesse: ‚ÄúVai encarar?‚Äù
                </div>
                <button
                  class="button-text"
                  onclick="togglePiece('description-morte', this)"
                >
                  Ler Mais
                </button>
              </div>
            </div>
          </li>

          <li>
            <div class="info-img">
              <span class="pieces-index white"></span>
            </div>
            <div class="info-text">
              <h6 class="piece-title">*Drag√£o (O Terror Alado) - 1 pe√ßa</h6>
              <div class="info-description">
                <div class="piece-description" id="description-dragao">
                  O Drag√£o √© o que mais se aproxima de uma for√ßa impar√°vel neste
                  jogo! Ele destro√ßa Guerreiros, frita Magos, desintegra Bruxas
                  e at√© faz a Morte pensar duas vezes. Mas cuidado: se topar com
                  outro Drag√£o, teremos um espet√°culo de fogo e f√∫ria, onde
                  ambos se reduzem a cinzas em um √©pico empate destrutivo. Imune
                  a magias e praticamente invulner√°vel, o Drag√£o tem apenas um
                  verdadeiro ponto fraco: Guerreiros audaciosos que, com
                  ast√∫cia, conseguem surpreend√™-lo. Mas fora isso, ele reina
                  absoluto!
                </div>
                <button
                  class="button-text"
                  onclick="togglePiece('description-dragao', this)"
                >
                  Ler Mais
                </button>
              </div>
            </div>
          </li>
        </ul>

        <p class="info-paragraph">
          ‚öîÔ∏è **Aviso de Guerra**: Quando a batalha termina e um jogador
          conquista a vit√≥ria, o jogo recome√ßa, mas o caos do destino
          redistribui todas as pe√ßas. Cada nova batalha reserva surpresas!
        </p>
      </div>
      <div class="container-buttons mt-4">
        <a
          href="https://github.com/tonicjunior/BoardToim"
          class="btn btn-outline-dark"
          target="_blank"
        >
          <img
            src="src/assets/images/git.png"
            alt="GitHub"
            class="icon"
            style="width: 24px; margin-right: 8px"
          />
          <span>Reposit√≥rio Git</span>
        </a>

        <a
          href="https://nubank.com.br/cobrar/3upen/672bafe3-8951-4aae-8e53-d86628e67a1a"
          class="btn btn-outline-primary"
          target="_blank"
        >
          <span>‚ù§Ô∏è Investir no projeto </span>
        </a>
      </div>
    </div>

    <div id="game-container">
      <div id="board"></div>

      <div class="timer-container" id="timer-container">
        <span id="player-turn"></span>
        <div id="timer">
          <span id="time-display">0</span>
          <span class="time-remaining">s restantes</span>
        </div>

        <div class="dropdown">
          <div class="image-container">
            <img
              src="src/assets/images/pergaminho.png"
              onclick="toggleDropdown()"
              class="dropbtn"
              alt="Op√ß√µes"
            />
          </div>
          <div id="dropdown-menu" class="dropdown-content">
            <div class="dropdown-item">
              <a href="#" id="tie-option" onclick="tie()">
                <img
                  src="src/assets/images/tq.png"
                  class="icone-img"
                  alt="empatar"
                />Empatar</a
              >
              <span id="tie-timer"></span>
            </div>
            <a href="#" onclick="surrender()">
              <img
                src="src/assets/images/bb.png"
                class="icone-img"
                alt="render"
              />Render</a
            >
            <a href="#" onclick="exit()">
              <img
                src="src/assets/images/exit.png"
                class="icone-img"
                alt="sair"
              />Sair</a
            >
            <a href="#" onclick="music()" >
              <img
                src="src/assets/images/music.png"
                class="icone-img"
                alt="music"
              /><span id="musicText">Pausar</span> M√∫sica</a
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Informativa -->
    <div id="modalRPGInfo" class="rpg-modal-overlay hide">
      <div class="rpg-modal-content">
        <h3 class="rpg-modal-title">üìú <span id="modalTitle"></span></h3>
        <p id="rpgInfoMessage"></p>
        <button class="rpg-modal-btn" id="confirmButton">Confirmar</button>
        <button
          id="cancelButton"
          class="rpg-modal-btn rpg-modal-cancel"
          onclick="closeRPGModal('modalRPGInfo')"
        >
          Cancelar
        </button>
      </div>
    </div>

    <!-- Modal com Input -->
    <div id="modalRPGInput" class="rpg-modal-overlay hide">
      <div class="rpg-modal-content">
        <h3 class="rpg-modal-title">‚öîÔ∏è Aten√ß√£o, Grande Aventureiro!</h3>
        <label for="rpgPlayerNick" class="rpg-modal-label"
          >Digite um nickname √©pico que fa√ßa at√© os drag√µes tremerem de
          medo!</label
        >
        <input
          type="text"
          id="rpgPlayerNick"
          class="rpg-modal-input"
          placeholder="Ex: NarutoUzocrack"
        />
        <button class="rpg-modal-btn" onclick="saveNickname()">
          Confirmar
        </button>
      </div>
    </div>

    <!-- Modal da Lista de Jogadores -->
    <div id="modalUserList" class="rpg-modal-overlay hide">
      <div class="rpg-modal-content">
        <h3 class="rpg-modal-title">‚öîÔ∏è Aventureiros Dispon√≠veis</h3>
        <div class="loading-div">
          <div id="loadingModal" class="loading-modal hide">
            <div class="loading-bar"></div>
          </div>
        </div>
        <ul id="userList" class="list-group">
          <!-- Os usu√°rios online ser√£o adicionados aqui -->
        </ul>
        <button class="rpg-modal-btn" onclick="closeUserListModal()">
          Fechar
        </button>
      </div>
    </div>

    <script>
      function togglePiece(descriptionId, button) {
        const description = document.getElementById(descriptionId);
        description.classList.toggle("expanded");
        button.innerText = description.classList.contains("expanded")
          ? "Ler Menos"
          : "Ler Mais";
      }

      function toggleDropdown() {
        document.getElementById("dropdown-menu").classList.toggle("show");
      }

      window.addEventListener("click", (event) => {
        const target = event.target;
        const isDropdownButton = target.matches(".dropbtn");
        const dropdowns = document.querySelectorAll(".dropdown-content");

        if (!isDropdownButton) {
          dropdowns.forEach((dropdown) => {
            if (dropdown.classList.contains("show")) {
              dropdown.classList.remove("show");
            }
          });
        }
      });
    </script>

    <script src="src/app.js"></script>
  </body>
</html>
